# Using Amazon GuardDuty Malware Protection for Amazon S3

The solution [CloudFormation template](https://github.com/aws-samples/guardduty-malware-protection/tree/main/cfn) provides you with multiple deployment scenarios for you to choose which best applies to your use case.

## Repo Structure

The following repository folder structure is:

```
dir
├── cdk
├── cfn
├── img
└── test
```

- `cdk` - The Cloud Development Kit project artifacts.
- `cfn` - The Cloudformation template artifacts.
- `img` - Images artifacts.
- `test` - Test files clean and infects files.

## Cloudformation

### Quickstart in AWS Console

If you'd like to get started quickly scanning objects with GuardDuty in S3, and without worrying about CI/CD, follow this guide:

1. Open the AWS Console and navigate to [AWS CloudFormation](https://console.aws.amazon.com/cloudformation/home?/create&#/stacks/create).
1. Under step `Create stack` choose an existing template.
1. Select `Upload a template file` radio button.
1. Click `Choose file` and navigate to the `template.yaml` from this repository in [cfn/template.yaml](https://github.com/aws-samples/guardduty-malware-protection/blob/main/cfn/template.yaml).
1. Under step `Specify stack details` choose the parameters that fit your deployment scenario.
1. You can leave `Configure stack options` as defaults, unless required.
1. Under step `Review and create` review your selections and acknowledge that AWS CloudFormation might create IAM resources. It will.
1. Click `Submit`.

### AWS CLI

To deploy Cloudformation via the CLI refer to the [cfn/README.md](https://github.com/aws-samples/guardduty-malware-protection/tree/main/cfn)

## Cloud Development Kit

If you've determined the AWS CDK is your preferred deployment of infrastructure as code (IaC) then a Typescript CDK Project has been provided in `cdk` folder.

If your new to AWS CDK before getting started, we recommend that you have a basic understanding of what the AWS CDK is. For more information, see [What is the AWS CDK?](https://docs.aws.amazon.com/cdk/v2/guide/home.html) and [Learn AWS CDK core concepts](https://docs.aws.amazon.com/cdk/v2/guide/core_concepts.html).

### Install the AWS CLI

As a user, you use the AWS CLI to create and manage configuration and credential files on your local machine. These files are used to store, manage, and generate security credentials for use with the CDK CLI.

To install the AWS CLI, see [Install or update to the latest version of the AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html) in the AWS Command Line Interface User Guide.

### Install Node.js and programming language prerequisites

All AWS CDK developers, regardless of the supported programming language that you will use, require [Node.js](https://nodejs.org/en/download/package-manager) 14.15.0 or later. All supported programming languages use the same backend, which runs on Node.js. We recommend a version in active long-term support. If your organization has a different recommendation, follow their guidance.

#### Install Typescript

CDK requires TypeScript 3.8 or later (`npm -g install typescript`)

For more information, [see Working with the AWS CDK in TypeScript](https://docs.aws.amazon.com/cdk/v2/guide/work-with-cdk-typescript.html).

### Follow CDK Project

Follow the instructions from the `README` located in `cdk` folder.

## Security

See [CONTRIBUTING](CONTRIBUTING.md#security-issue-notifications) for more information.

## License

This library is licensed under the MIT-0 License. See the LICENSE file.
